@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

@layer base {
  body {
    @apply bg-white text-gray-900 dark:bg-gray-950 dark:text-gray-100 antialiased;
    font-family: 'Inter', system-ui, sans-serif;
  }
}

@layer components {
  .btn-primary {
    @apply inline-flex items-center justify-center px-5 py-2.5 rounded-xl
           bg-brand-600 text-white font-medium text-sm
           hover:bg-brand-700 active:bg-brand-800
           transition-all duration-150 ease-out
           shadow-sm hover:shadow-md
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center px-5 py-2.5 rounded-xl
           bg-gray-100 text-gray-700 font-medium text-sm
           hover:bg-gray-200 active:bg-gray-300
           dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700
           transition-all duration-150 ease-out;
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center px-4 py-2 rounded-lg
           text-gray-600 font-medium text-sm
           hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800
           transition-all duration-150 ease-out;
  }

  .card {
    @apply bg-white dark:bg-gray-900 rounded-2xl border border-gray-200 dark:border-gray-800
           shadow-sm hover:shadow-md transition-shadow duration-200;
  }

  .input-field {
    @apply w-full px-4 py-2.5 rounded-xl border border-gray-300 dark:border-gray-700
           bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100
           placeholder:text-gray-400 dark:placeholder:text-gray-500
           focus:outline-none focus:ring-2 focus:ring-brand-500/40 focus:border-brand-500
           transition-all duration-150;
  }

  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .badge-brand {
    @apply badge bg-brand-100 text-brand-700 dark:bg-brand-900/30 dark:text-brand-300;
  }

  .badge-green {
    @apply badge bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300;
  }

  .badge-gray {
    @apply badge bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400;
  }
}

@layer utilities {
  .glass {
    @apply bg-white/70 dark:bg-gray-900/70 backdrop-blur-xl;
  }

  .gradient-text {
    @apply bg-gradient-to-r from-brand-500 to-violet-500 bg-clip-text text-transparent;
  }
}

.react-flow__node {
  @apply !shadow-none;
}

.react-flow__handle {
  @apply !w-3 !h-3 !bg-brand-500 !border-2 !border-white dark:!border-gray-900;
}

.react-flow__edge-path {
  @apply !stroke-brand-400 !stroke-2;
}

.react-flow__background {
  @apply dark:!bg-gray-950;
}

/* Dark-mode overrides for React Flow controls (zoom +/-, fit, lock) */
.dark .react-flow__controls {
  background: #111827 !important;
  border-color: #374151 !important;
  box-shadow: 0 4px 12px rgba(0,0,0,.4) !important;
}

.dark .react-flow__controls-button {
  background: #111827 !important;
  border-color: #374151 !important;
  fill: #fff !important;
  color: #fff !important;
}

.dark .react-flow__controls-button:hover {
  background: #1f2937 !important;
}

.dark .react-flow__controls-button svg {
  fill: #fff !important;
}

/* Hide React Flow attribution watermark */
.react-flow__attribution {
  display: none !important;
}

/* Dark-mode MiniMap */
.dark .react-flow__minimap {
  background: #111827 !important;
  border-color: #374151 !important;
}

/* Indeterminate progress shimmer for running steps */
@keyframes progress-indeterminate {
  0% { width: 15%; margin-left: 0; }
  50% { width: 45%; margin-left: 30%; }
  100% { width: 15%; margin-left: 85%; }
}

.animate-progress {
  animation: progress-indeterminate 1.8s ease-in-out infinite;
}
